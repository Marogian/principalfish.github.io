<!DOCTYPE html>
<meta charset="utf-8">
<head>
	<title>UK Election Maps</title>
	<link type="text/css" rel="stylesheet" href="/electionmaps/stylesheets/main.css"/>
	<link type="text/css" rel="stylesheet" href="/electionmaps/stylesheets/theme.default.css"/>
	<link rel="stylesheet" href="/scripts/jqueryui/jquery-ui.structure.css"/>
	<link rel="shortcut icon" href="/img/logo.png">
</head>

<body>
	<script type="text/javascript" src="/scripts/d3.min.js"></script>
	<script type="text/javascript" src="/scripts/topojson.js"></script>
	<script type="text/javascript" src="/scripts/jquery-2.1.3.min.js"></script>
	<script type="text/javascript" src="/scripts/jqueryui/jquery-ui.min.js"></script>
	<script type="text/javascript" src="/scripts/jquery.tablesorter.min.js"></script>
	<script type="text/javascript" src="/scripts/jquery.tablesorter.widgets.min.js"></script>
	<!-- SCRIPTS THAT RUN PAGE BELOW HERE -->
	<script type="text/javascript" src="main.js"></script>

    <header>
        <h1>UK Election Maps - <span id="headertitle">2015 Parliament</span></h1>
        <script>
            $(function(){
                $("#menu").load("/menu.html")
            });
        </script>
        <div id="menu">

        </div>
    </header>

    <div id="wrapper" class="projection">

				<nav class="projections">

					<h3 id="nav2015parliament" class="currentpage"><a href="#" onclick="loadTheMap('2015parliament'); alterTheUI('2015parliament');"> 2015 Parliament</a> </h3>
					<h3 id="nav2010parliament" class="notactive"><a href="#" onclick="loadTheMap('2010parliament'); alterTheUI('2010parliament');">2010 Parliament</a></h3>
										<div class="divider"></div>
					<h3 id="nav2020projection" class="notactive"><a href="#" onclick="loadTheMap('2020projection'); alterTheUI('2020projection');">2020 Projection</a></h3>
					<h3 id="nav2015projection" class="notactive"><a href="#" onclick="loadTheMap('2015projection'); alterTheUI('2015projection');">2015 Projection</a></h3>
                    <div class="divider"></div>
					<h3 id="navprojectionuserinput" style="display:none" class="notactive" onclick="showUserInput();"><a href="#">User Input</a></h3>
					<h3 id="navseatlist" class="notactive" onclick="showSeatList('england');"><a href="#">Seat List </a></h3>
					<h3 id="navprojectionmethodology" style="display:none" class="notactive" onclick="showMethodology();"><a href="#">Methodology</a></h3>

                </nav>


				<div id="map">
						<script>
							var width = 600, // width and height of map
								height = 850,
								active = d3.select(null);

							var projection = d3.geo.albers() // variables to change default map position
								.center([-0.5, 54.6]) //centers vertically and horizontally
								.rotate([2.25, 0])
								.parallels([51, 60])
								.scale(5300)
								.translate([width / 2, height / 2]);

							var zoom = d3.behavior.zoom()
								.translate([0, 0])
								.scale(1)
								.scaleExtent([1, 10]) // change depth of potential zoom
								.on("zoom", zoomed); // starts zoom function

							var path = d3.geo.path()
								.projection(projection);

							var svg = d3.select("#map").append("svg")
								.attr("width", width)
								.attr("height", height)
								.on("click", stopped, true);

							svg.append("rect")
								.attr("class", "background")
								.attr("width", width)
								.attr("height", height)
								.on("click", reset);

							var g = svg.append("g");

							var previousnode, current;

							svg
								.call(zoom)
								.call(zoom.event);

					</script>
				</div>

				<div id="resetbutton">
						<button id="resetmap" onclick="reset()">Reset</button>
				</div>
				<div id="keyonmap">

				</div>

				<div id="maptitle" class="dash-box">
					<h2 id="maptitletext"></h2>
				</div>

				<div id="seatlist" class="dash-box">
				</div>

				<div id="methodology" class="dash-box">
				</div>

				<div id="userinput" class="dash-box">
				</div>

				<div id="seat-information" class="dash-box">
						<h2 id="information-seatname"><span id="information-seatname-span"></span><div class="closebox" onclick="$('#seat-information').hide()">X</div></h2>


						<div>
								<div class="seat-summary">
										<div id="information-region"></div>
										<div></div>
										<div id="information-party">
												<div class="party-name"></div>
												<div class="party-flair"></div>
										</div>
										<div id="information-gain">
												<div class="party-name"></div>
												<div class="party-flair"></div>
										</div>
										<div id="information-majority"></div>
										<div id="information-turnout"></div>
								</div>
								<div id="charts">
										<div id="information-pie"></div>
										<div id="information-chart"></div>
										<div id="information-byelection"></div>
								</div>

						</div>

				</div>

				<div id="totals" class="dash-box">

            <h2>Totals</h2>

            <div id="totalstablediv">

                <label for="selectareatotals"> Select Region</label>
                <select id="selectareatotals" onchange="selectAreaInfo(value)">
                    <option value="country"></option>
                    <option value="greatbritain">Great Britain</option>
                    <option value="england">England</option>
                    <option value="scotland">Scotland</option>
                    <option value="wales">Wales</option>
                    <option value="northernireland">Northern Ireland</option>
                    <option value="eastofengland">East of England</option>
                    <option value="eastmidlands"> East Midlands</option>
                    <option value="london">London</option>
                    <option value="northeastengland">North East England</option>
                    <option value="northwestengland">North West England</option>
                    <option value="southeastengland">South East England</option>
                    <option value="southwestengland">South West England</option>
                    <option value="westmidlands">West Midlands</option>
                    <option value="yorkshireandthehumber">Yorkshire & Humber</option>
                </select>

								<div id="totalturnout">Turnout</div>


                <table id="totalstable" class="tablesorter">
                    <thead>
                    <tr>
                        <th>Party</th>
                        <th class="tablesorter-header">Seats</th>
                        <th class="tablesorter-header">Change</th>
                        <th class="tablesorter-header">Votes</th>
												<th class="tablesorter-header">Vote %</th>
                        <th class="tablesorter-header">% +/-</th>
                    </tr>

                    </thead>

                    <tbody id="totalstableinfo"></tbody>
                    <tfoot id="totalstablefoot"></tfoot>

                </table>
            </div>
        </div>

				<div id="searchforseat" class="dash-box">
                    <h2>Seat Search</h2>
                    <div>
                        <input type="text" id="searchseats" class="searchinput"/>
                    </div>
				</div>



			<div id="filters" class="dash-box">

					<h2>Filters</h2>

                    <div>
                        <label for="dropdownparty">by party</label>
                        <select id="dropdownparty" onchange="filterStates[0].party = value, filterMap()">
                            <option value="null"></option>
                            <option value="labour">Labour</option>
                            <option value="conservative">Conservative</option>
                            <option value="libdems">Liberal Democrats</option>
                            <option value="ukip">UKIP</option>
                            <option value="snp">SNP</option>
                            <option value="plaidcymru">Plaid Cymru</option>
                            <option value="green">Green</option>
                            <option value="dup">DUP</option>
                            <option value="sinnfein">Sinn FÃ©in</option>
                            <option value="sdlp">SDLP</option>
                            <option value="alliance">Alliance</option>
                            <option value="uu">UUP</option>
                            <option value="other">Other</option>
                        </select>

                        <label id="dropdowngainslabel" for="dropdowngains">by gains/no change</label>
                        <select id="dropdowngains" onchange="filterStates[1].gain = value, filterMap()">
                            <option value="null"></option>
                            <option value="gain">Gains</option>
                            <option value="hold">No Change</option>
                        </select>

                        <label for="dropdownregion">by region</label>
                        <select id="dropdownregion" onchange="filterStates[2].region = value, filterMap(), selectAreaInfo(value)">
                            <option value="null"></option>
                            <option value="eastofengland">East of England</option>
                            <option value="eastmidlands"> East Midlands </option>
                            <option value="london">London</option>
                            <option value="northeastengland">North East England</option>
                            <option value="northwestengland">North West England</option>
                            <option value="northernireland">Northern Ireland</option>
                            <option value="scotland">Scotland</option>
                            <option value="southeastengland">South East England</option>
                            <option value="southwestengland">South West England</option>
                            <option value="wales">Wales</option>
                            <option value="westmidlands">West Midlands</option>
                            <option value="yorkshireandthehumber">Yorkshire & Humber</option>
                        </select>
                        <label>by majority percentage</label>
													<form id="majority">
                            <input type ="text" name="majoritylow" value=0 onchange="filterStates[3].majoritylow = parseFloat(value), filterMap()"/>
                            to
                            <input type="text" name="majorityhigh" value=100 onchange="filterStates[4].majorityhigh = parseFloat(value), filterMap()"/>
													</form>

                        <div class="filter-buttons">
                            <button id="filtertolist" onclick="generateSeatList()">Generate seat list</button>
                            <button id="filterbutton" onclick="resetFilter()">Reset</button>
                        </div>

                        </div>
				</div>


				<div class="filteredlisttablecontainer dash-box">
                    <h2>Seats</h2>
                    <div>
                        <div id="totalfilteredseats"></div>
                        <div id="filteredlisttable"></div>
                    </div>
                </div>


				<div id="choropleths" class="dash-box">
					<h2>Choropleths</h2>

					<div id="votesharebyparty">
						<label for="votesharebypartyselect">Vote share: </label>
						<select id="votesharebypartyselect" onchange ="partyVoteShare = value; choroplethInitiator(partyVoteShare, 'percent')">
								<option value="null"></option>
								<option value="labour">Labour</option>
								<option value="conservative">Conservative</option>
								<option value="libdems">Liberal Democrats</option>
								<option value="ukip">UKIP</option>
								<option value="snp">SNP</option>
								<option value="plaidcymru">Plaid Cymru</option>
								<option value="green">Green</option>
								<option value="dup">DUP</option>
								<option value="sinnfein">Sinn FÃ©in</option>
								<option value="sdlp">SDLP</option>
								<option value="alliance">Alliance</option>
								<option value="uu">UUP</option>
							</select>
					</div>

					<div id="votesharechangebyparty">

						<label for="votesharechangebypartyselect">Vote share +/-: </label>
						<select id="votesharechangebypartyselect" onchange ="partyVoteShareChange = value; choroplethInitiator(partyVoteShareChange, 'change')">
								<option value="null"></option>
								<option value="labour">Labour</option>
								<option value="conservative">Conservative</option>
								<option value="libdems">Liberal Democrats</option>
								<option value="ukip">UKIP</option>
								<option value="snp">SNP</option>
								<option value="plaidcymru">Plaid Cymru</option>
								<option value="green">Green</option>
								<option value="dup">DUP</option>
								<option value="sinnfein">Sinn FÃ©in</option>
								<option value="sdlp">SDLP</option>
								<option value="alliance">Alliance</option>
								<option value="uu">UUP</option>
						</select>
					</div>

					<div id="swingfromto">

							<label for="swingfrom">Swing between: </label>
							<select id="swingfrom" onchange ="swingState[0] = value; choroplethInitiator(swingState, 'swing')">
								<option value="null"></option>
								<option value="labour">Labour</option>
								<option value="conservative">Conservative</option>
								<option value="libdems">Liberal Democrats</option>
								<option value="ukip">UKIP</option>
								<option value="snp">SNP</option>
								<option value="plaidcymru">Plaid Cymru</option>
								<option value="green">Green</option>
								<option value="dup">DUP</option>
								<option value="sinnfein">Sinn FÃ©in</option>
								<option value="sdlp">SDLP</option>
								<option value="alliance">Alliance</option>
								<option value="uu">UUP</option>
							</select>


							<label for="swingto"> and </label>
							<select id="swingto" onchange ="swingState[1] = value; choroplethInitiator(swingState, 'swing')">
								<option value="null"></option>
								<option value="labour">Labour</option>
								<option value="conservative">Conservative</option>
								<option value="libdems">Liberal Democrats</option>
								<option value="ukip">UKIP</option>
								<option value="snp">SNP</option>
								<option value="plaidcymru">Plaid Cymru</option>
								<option value="green">Green</option>
								<option value="dup">DUP</option>
								<option value="sinnfein">Sinn FÃ©in</option>
								<option value="sdlp">SDLP</option>
								<option value="alliance">Alliance</option>
								<option value="uu">UUP</option>
						</select>
					</div>

				</div>



<!-- -->
</div>

<footer>
    <p>Copyright 2015 principalfish.co.uk</p>
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-58696407-1', 'auto');
		ga('send', 'pageview');

	</script>
</footer>

</body>
