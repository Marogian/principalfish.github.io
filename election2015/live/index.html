<!DOCTYPE html>
<meta charset="utf-8">
<head>
	<title>Election LIVE</title>
	<link type="text/css" rel="stylesheet" href="/stylesheets/template.css"/>
	<link type="text/css" rel="stylesheet" href="/election2015/stylesheets/main.css"/>
	<link type="text/css" rel="stylesheet" href="/election2015/stylesheets/projection.css"/>
	<link type="text/css" rel="stylesheet" href="/election2015/stylesheets/theme.default.css"/>
	<link rel="stylesheet" href="/scripts/jqueryui/jquery-ui.structure.css"/>
	<link rel="stylesheet" href="main.css"/>
	<link rel="shortcut icon" href="/img/logo.png">
</head>

<body>
	<script type="text/javascript" src="/election2015/scripts/d3.min.js"></script>
	<script type="text/javascript" src="/election2015/scripts/topojson.js"></script>
	<script type="text/javascript" src="/election2015/scripts/dictionary.js"></script>
	<script type="text/javascript" src="/scripts/jquery-2.1.3.min.js"></script>
	<script type="text/javascript" src="/scripts/jqueryui/jquery-ui.min.js"></script>
	<script type="text/javascript" src="/election2015/scripts/papaparse.min.js"></script>
	<script type="text/javascript" src="main.js"></script>
	<script type="text/javascript" src="/election2015/scripts/jquery.tablesorter.min.js"></script>
	<script type="text/javascript" src="/election2015/scripts/jquery.tablesorter.widgets.min.js"></script>

		<div id="wrapper">
			<div id="top">
				<h2>UK Election Maps - LIVE &nbsp; <span style="font-size: 0.75em;">Currently running a full test</span></h2>

				<div id="refreshbutton">
					<button id="togglerefresh" onclick="refreshState = !(refreshState), autoRefresh()">Turn off auto-refresh</button>
				</div>

				<script>
				$(function(){
					$("#menu").load("/menu.html")
				});
				</script>
				<div id="menu">

				</div>
			</div>

			<div id ="farleft">


				<div class="projections">

					<h3 class="notactive"><a href="/election2015/"> 2015 Projection</a></h3>
					<h3 class="notactive"><a href="/election2015/nowcast.html">2015 Nowcast</a></h3>
					<h3 class="notactive"><a href="/election2015/current.html">Current Parliament</a></h3>
					<h3 class="currentpage">LIVE! - Testing</h3>

				</div>

				<div class ="projections" id="otherlinks">
					<h3 class="notactive"><a href="/election2015/methodology.html">Methodology</a></h3>
					<h3 class="notactive"><a href="/election2015/polls.html">Polls</a></h3>
					<h3 class="notactive"><a href="/election2015/seats.html">Seat List </a></h3>
					<h3 class="notactive"><a href="/election2015/trends.html">Trends</a></h3>
					<h3 class="notactive"><a href="/election2015/articles/">Articles</a></h3>
				</div>


				<div id="searchforseat">
					<h2>Seat Search</h2>
					<input type="text" id="searchseats"/>
				</div>


				<div id="filters">

					<h2> Filters <button id ="filterbutton" onclick="resetFilter()">Reset</button></h2>


					<p> by party  <select id="dropdownparty" onchange="filterStates[0].party = value, filterMap()">
						<option value="null"></option>
						<option value="labour">Labour</option>
						<option value="conservative">Conservative</option>
						<option value="libdems">Liberal Democrats</option>
						<option value="ukip">UKIP</option>
						<option value="snp">SNP</option>
						<option value="plaidcymru">Plaid Cymru</option>
						<option value="green">Green</option>
						<option value="dup">DUP</option>
						<option value="sinnfein">Sinn FÃ©in</option>
						<option value="sdlp">SDLP</option>
						<option value="alliance">Alliance</option>
						<option value="uu">UUP</option>
						<option value="other">Other</option>

					</select> </p>


					<p> by gains/no change
						<select id="dropdowngains" onchange="filterStates[1].gain = value, filterMap()">
							<option value="null"></option>
							<option value="gains">Gains</option>
							<option value="nochange">No Change</option>
						</select>
					</p>

					<p> by region <select id="dropdownregion" onchange="filterStates[2].region = value, filterMap()">
						<option value="null"></option>
						<option value="eastofengland">East of England</option>
						<option value="eastmidlands"> East Midlands </option>
						<option value="london">London</option>
						<option value="northeastengland">North East England</option>
						<option value="northwestengland">North West England</option>
						<option value="northernireland">Northern Ireland</option>
						<option value="scotland">Scotland</option>
						<option value="southeastengland">South East England</option>
						<option value="southwestengland">South West England</option>
						<option value="wales">Wales</option>
						<option value="westmidlands">West Midlands</option>
						<option value="yorkshireandthehumber">Yorkshire & Humber</option>
					</select> </p>

					<p> by majority percentage
						<form id="majority">
						<input type ="text" name="majoritylow" value=0 onchange="filterStates[3].majoritylow = parseFloat(value), filterMap()"/>
							to
						<input type="text" name="majorityhigh" value=100 onchange="filterStates[4].majorityhigh = parseFloat(value), filterMap()"/>
						</form>
					</p>

				</div>

				<div id ="filteredlist">

				</div>
				<div id ="totalfilteredseats"></div>
				<div id ="filteredlisttable"></div>



			</div>

			<div id="left">
				<!--- CHANGE** No user inputs-->
				<div id="resetbutton">
					<button id="resetmap" onclick="reset()">Reset</button>
				</div>

					<script>

						var width = 600, // width and height of map
							height = 900;
							active = d3.select(null);

						var projection = d3.geo.albers() // variables to change default map position
							.center([0, 54.3]) //centers vertically and horizontally
							.rotate([2.25, 0])
							.parallels([51, 60])
							.scale(5800)
							.translate([width / 2, height / 2]);

						var zoom = d3.behavior.zoom()
							.translate([0, 0])
							.scale(1)
							.scaleExtent([1, 10]) // change depth of potential zoom
							.on("zoom", zoomed); // starts zoom function

						var path = d3.geo.path()
							.projection(projection)


						var svg = d3.select("#left").append("svg")
							.attr("width", width)
							.attr("height", height)
							.on("click", stopped, true);

						svg.append("rect")
							.attr("class", "background")
							.attr("width", width)
							.attr("height", height)
							.on("click", reset);

						var g = svg.append("g");

						var previousnode, current;

						svg
							.call(zoom)
							.call(zoom.event);

				</script>

			<div id ="mid">
				<div id="ticker">
				</div>
			</div>

			</div>



			<div id="right">

				<!--- CHANGE** more stuff in here-->
				<div id ="information">
				</div>


				<div id="charts">
						<div id="information-pie"></div>
						<div id="information-chart"></div>
				</div>

				<div id="coalitions">
					<h3> Possible Coalitions  &nbsp;&nbsp; Majority = 326, Effective Majority = 323</h3>
					<h3 id="coalitionlist"></h3>
					<h5 id="coalitionnote">*assumes speaker counts for Conservatives</h5>

				</div>


				<div id = "totals">

					<h3> Select Region <select id="selectareatotals" onchange="selectAreaInfo(value)">
						<option value="country">United Kingdom</option>
						<option value="greatbritain">Great Britain</option>
						<option value="england">England</option>
						<option value="scotland">Scotland</option>
						<option value="wales">Wales</option>
						<option value="northernireland">Northern Ireland</option>
						<option value="eastofengland">East of England</option>
						<option value="eastmidlands"> East Midlands </option>
						<option value="london">London</option>
						<option value="northeastengland">North East England</option>
						<option value="northwestengland">North West England</option>
						<option value="southeastengland">South East England</option>
						<option value="southwestengland">South West England</option>
						<option value="westmidlands">West Midlands</option>
						<option value="yorkshireandthehumber">Yorkshire & Humber</option>
					</select></h3>



					<table id="totalstable" class="tablesorter">
						<thead>
							<tr>
								<th>Party</th>
								<th class="tablesorter-header">Seats</th>
								<th class="tablesorter-header">Change</th>
								<th class="tablesorter-header">Votes</th>
								<th class="tablesorter-header">Vote %</th>
							</tr>

						</thead>

						<tbody id="totalstableinfo"></tbody>
						<tfoot id="totalstablefoot"></tfoot>

					</table>

				</div>

			</div>
		</div>

		<div id="footer">
			<p> Copyright 2015 principalfish.co.uk</p>
		</div>


</body>

<footer>
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-58696407-1', 'auto');
		ga('send', 'pageview');

	</script>
</footer>
