/*! principalfish 30-04-2017 */
function getData(){$.when($.getJSON("cards_simple.json",function(a){cardData=a})).then(function(){pageLoad()})}function pageLoad(){$.each(cardData,function(a,b){b.filtered=!0,dict.mode.standard.indexOf(b.set)!=-1?b.mode="standard":b.mode="wild"}),filters.resetFilter(),filters.filter(),filters.displayCard("f5d6/rel/OG_311.png")}function initialization(){$(document).ready(function(){getData()})}var dict={class:{NEUTRAL:"neutral",WARRIOR:"warrior",ROGUE:"rogue",MAGE:"mage",PALADIN:"paladin",PRIEST:"priest",DRUID:"druid",WARLOCK:"warlock",SHAMAN:"shaman",HUNTER:"hunter"},classText:{NEUTRAL:"Neutral",WARRIOR:"Warrior",ROGUE:"Rogue",MAGE:"Mage",PALADIN:"Paladin",PRIEST:"Priest",DRUID:"Druid",WARLOCK:"Warlock",SHAMAN:"Shaman",HUNTER:"Hunter"},type:{MINION:"Minion",SPELL:"Spell",WEAPON:"Weapon"},rarity:{LEGENDARY:"Legendary",EPIC:"Epic",RARE:"Rare",COMMON:"Common",FREE:"Free"},set:{BRM:"Blackrock",EXPERT1:"Expert",OG:"Old Gods",TGT:"Grand Tourney",GANGS:"Gadgetzan",KARA:"Karazhan",CORE:"Core",LOE:"Explorers",GVG:"Goblins/Gnomes",NAXX:"Naxxramas",REWARD:"Reward",UNGORO:"Ungoro",HOF:"Hall of Fame"},mode:{standard:["EXPERT1","OG","GANGS","KARA","CORE","UNGORO"],wild:["BRM","TGT","LOE","GVG","NAXX"]}},filters={filterStates:{},filterStatesDefault:{mode:{standard:!0,wild:!1},cardClass:{NEUTRAL:!0,WARRIOR:!0,ROGUE:!0,MAGE:!0,PALADIN:!0,PRIEST:!0,DRUID:!0,WARLOCK:!0,SHAMAN:!0,HUNTER:!0},type:{MINION:!0,WEAPON:!0,SPELL:!0},rarity:{FREE:!0,COMMON:!0,RARE:!0,EPIC:!0,LEGENDARY:!0},race:{"":!0,BEAST:!0,ELEMENTAL:!0,MECHANICAL:!0,PIRATE:!0,DEMON:!0,DRAGON:!0,MURLOC:!0,TOTEM:!0},cost:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,"7plus":!0}},mechanicFilter:"null",filteredList:[],resetFilter:function(){filters.filterStates=jQuery.extend(!0,{},filters.filterStatesDefault)},handle:function(a){var b=a.split("-");["cardClass","type","rarity","mechanics","race"].indexOf(b[1])!=-1&&(b[2]=b[2].toUpperCase()),filters.filterStates[b[1]][b[2]]=!filters.filterStates[b[1]][b[2]],1==filters.filterStates[b[1]][b[2]]?($("#"+a).removeClass("not-selected"),$("#"+a).addClass("selected")):($("#"+a).removeClass("selected"),$("#"+a).addClass("not-selected")),filters.filter(b[1])},selectHandle:function(a){filters.mechanicFilter=a,filters.filter()},filter:function(){filters.filteredList=[],sort.resetSort(),$.each(cardData,function(a,b){b.filtered=!0,1!=filters.filterStates.mode[b.mode]?b.filtered=!1:1!=filters.filterStates.cardClass[b.cardClass]?b.filtered=!1:1!=filters.filterStates.type[b.type]?b.filtered=!1:1!=filters.filterStates.rarity[b.rarity]?b.filtered=!1:1!=filters.filterStates.race[b.race]?b.filtered=!1:1!=filters.filterStates.cost[b.costStr]&&(b.filtered=!1),"null"!=filters.mechanicFilter&&b.mechanics.indexOf(filters.mechanicFilter)==-1&&(b.filtered=!1),1==b.filtered&&filters.filteredList.push(b)}),sort.sortData("name","asc"),sort.changeHeader("display-name"),filters.writeTable()},writeTable:function(){$("#display-cardstotal").text(filters.filteredList.length),$("#display-table-data").empty(),$.each(filters.filteredList,function(a,b){var c="</div><div>",d="<div onclick='filters.displayCard(\""+b.url+"\")' class='card-row "+dict.class[b.cardClass]+"'><div>";d+=b.name+c+dict.classText[b.cardClass]+c+dict.type[b.type]+c+dict.rarity[b.rarity]+c+dict.set[b.set]+c+b.cost+"</div></div>",$("#display-table-data").append(d)})},displayCard:function(a){var b="https://cdn.rawgit.com/schmich/hearthstone-card-images/"+a,c="<img src='"+b+"' />";$("#card").html(c)},selectAllStatus:!1,selectAll:function(a){$.each(filters.filterStates,function(a,b){$.each(b,function(c,d){b[c]=filters.selectAllStatus,0==filters.selectAllStatus?($("#filters-"+a+"-"+c.toLowerCase()).removeClass("selected"),$("#filters-"+a+"-"+c.toLowerCase()).addClass("not-selected"),$("#filter-mechanic-select").prop("selectedIndex",0),filters.mechanicFilter="null"):($("#filters-"+a+"-"+c.toLowerCase()).removeClass("not-selected"),$("#filters-"+a+"-"+c.toLowerCase()).addClass("selected"),$("#filter-mechanic-select").prop("selectedIndex",0),filters.mechanicFilter="null")})}),1==filters.selectAllStatus?$("#filters-select-button").text("Deselect All"):$("#filters-select-button").text("Select All"),filters.selectAllStatus=!filters.selectAllStatus,filters.filter()}},cardData=[];initialization();var sort={sortStates:{},sortStatesDefault:{name:"asc",cardClass:"desc",type:"desc",rarity:"desc",set:"desc",cost:"asc"},resetSort:function(){sort.sortStates=jQuery.extend(!0,{},sort.sortStatesDefault)},sortTable:function(a){sort.changeHeader(a),a=a.slice(8),"asc"==sort.sortStates[a]?(sort.sortStates[a]="desc",sort.sortData(a,"desc")):"desc"==sort.sortStates[a]&&(sort.sortStates[a]="asc",sort.sortData(a,"asc")),filters.writeTable()},changeHeader:function(a){$(".sort-active").removeClass(),$("#"+a).addClass("sort-active")},sortData:function(a,b){var c=filters.filteredList.map(function(a,b){return{ind:b,data:a}});"asc"==b&&c.sort(function(b,c){return b.data[a]<c.data[a]?-1:b.data[a]>c.data[a]?1:b.ind-c.ind}),"desc"==b&&c.sort(function(b,c){return b.data[a]<c.data[a]?1:b.data[a]>c.data[a]?-1:b.ind-c.ind}),filters.filteredList=c.map(function(a){return a.data})}};